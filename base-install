#!/bin/zsh

askPartition() {
    SWAPON=y
    HOMEPART=y
    read -q "SWAPON?Create partition for swap? (y/N)"
    read -q "HOMEPART?Create partition for '/home'? (y/N)"

    case $SWAPON in
        y|Y)
            echo "Creating swap...";
            ;;
        n|N)
            echo "Skipping swap partition"
            ;;
        *)
            echo "Invalid input. Interperating as NO";
            ;;
    esac

    case $HOMEPART in
        y|Y)
            echo "Creating home partitions...";
            ;;
        n|N)
            echo "Skipping home partition"
            ;;
        *)
            echo "Invalid input. Interperating as NO";
            ;;
    esac
}

createPartition() {

}

parittionDisk() {
    EFI=$(ls /sys/firmware/efi/efivars | wc -l)
}

printDisks() {
    lsblk | cut -d " " -f1 | egrep '^nvme|^sd|^hd|^vd'
}

diskCount() {
    printDisks | wc -l
}

askForDisk() {
    echo "\nSelect a disk for patitioning"
    printDisks | awk '{print NR, ")", $0}'
    read "DSEL?(0-$(diskCount)): "

    [ "$DSEL" -lt "$(diskCount)" ] || (echo "Invalid selection '$DSEL'."; askForDisk;)

    read -q "OKTOGO?$DSEL is about to be nuked. Are you ok with this? (y/N): ";

    case $OKTOGO in 
        y|Y)
            echo "You can Ctrl+C your way out before you answer to partition questions."
            askPartition
            ;;
        n|N)
            ;;
        *)
            ;;
    
}

selectDisk() {
    echo ""
    DSEL=$(selectDisk)
    echo $(printDisks) | cut -d " " -f$DSEL
}

#loadkeys fi
#timedatectl set-ntp true

